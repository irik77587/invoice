(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{230:function(t,e){},232:function(t,e){},261:function(t,e){},262:function(t,e){},372:function(t,e){},541:function(t,e,s){},542:function(t,e,s){"use strict";s.r(e);var n=s(5),i=s(214),c=s.n(i),r=s(17),a=s(18),o=s(20),l=s(19),u=s(115),h=s(4),d=function(t){Object(o.a)(s,t);var e=Object(l.a)(s);function s(t){var i;return Object(r.a)(this,s),(i=e.call(this,t)).state={status:void 0,statusDesc:void 0},i.brand=Object(n.createRef)(),i.agent=Object(n.createRef)(),i.local=Object(n.createRef)(),i.email=Object(n.createRef)(),i.phone=Object(n.createRef)(),i.cyber=Object(n.createRef)(),i}return Object(a.a)(s,[{key:"createClient",value:function(){""==this.brand.current.value?this.setState({status:"warning",statusDesc:"Warning! Company Name cannot be empty"}):this.props.saveClientProfile({brand:this.brand.current.value,agent:this.agent.current.value,local:this.local.current.value,email:this.email.current.value,phone:this.phone.current.value,cyber:this.cyber.current.value})?this.setState({status:"success",statusDesc:"Success!"}):this.setState({status:"failure",statusDesc:"Failed! Probably duplicate"})}},{key:"render",value:function(){var t=this,e={width:"100%"};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{style:{width:"50%"},onClick:this.createClient.bind(this),children:"Enter"}),Object(h.jsxs)("section",{style:"failure"==this.state.status?{display:"flex",justifyContent:"space-between",backgroundColor:"red",color:"white",fontWeight:"bold",paddingInline:"1rem"}:"success"==this.state.status?{display:"flex",justifyContent:"space-between",backgroundColor:"green",color:"white",fontWeight:"bold",paddingInline:"1rem"}:"warning"==this.state.status?{display:"flex",justifyContent:"space-between",backgroundColor:"yellow",color:"black",fontWeight:"bold",paddingInline:"1rem"}:{display:"none"},children:[this.state.statusDesc,Object(h.jsx)("button",{onClick:function(){t.setState({status:void 0,statusDesc:void 0})},children:"X"})]}),Object(h.jsx)("input",{style:e,type:"text",ref:this.brand,placeholder:"Company"}),Object(h.jsx)("input",{style:e,type:"text",ref:this.agent,placeholder:"Owner/Agent"}),Object(h.jsx)("input",{style:e,type:"text",ref:this.local,placeholder:"Address"}),Object(h.jsx)("input",{style:e,type:"text",ref:this.email,placeholder:"Email"}),Object(h.jsx)("input",{style:e,type:"text",ref:this.cyber,placeholder:"Website"}),Object(h.jsx)("input",{style:e,type:"text",ref:this.phone,placeholder:"Phone"})]})}}]),s}(n.Component),b=s(114),j=function(t){Object(o.a)(s,t);var e=Object(l.a)(s);function s(t){var i;return Object(r.a)(this,s),(i=e.call(this,t)).state={status:void 0,statusDesc:void 0,invoice:[],subtotal:0},i.desc=Object(n.createRef)(),i.cost=Object(n.createRef)(),i.date=Object(n.createRef)(),i.tax=Object(n.createRef)(),i.sym=Object(n.createRef)(),i}return Object(a.a)(s,[{key:"addToInvoice",value:function(){var t=/[^0-9a-z]/gi,e=this.desc.current.value,s=this.cost.current.value;if(""==e)return this.setState({status:"error",statusDesc:"Empty service description"});if(""==s)return this.setState({status:"error",statusDesc:"Empty or non-numeric service price"});if(this.state.invoice.length&&void 0!=this.state.invoice.find((function(s){return s.desc.replace(t,"").toUpperCase()==e.replace(t,"").toUpperCase()})))return this.setState({status:"failure",statusDesc:"Possibly duplicate service description"});var n={desc:e,cost:s};return this.setState((function(t,e){return{status:void 0,statusDesc:void 0,subtotal:t.subtotal+Number(s),invoice:t.invoice.concat([n])}}))}},{key:"removeService",value:function(t){this.setState((function(e,s){return{subtotal:1==e.invoice.length?0:e.subtotal-Number(e.invoice[t].cost),invoice:[].concat(Object(b.a)(e.invoice.slice(0,t)),Object(b.a)(e.invoice.slice(t+1)))}}))}},{key:"swapInArray",value:function(t,e){this.setState((function(s,n){var i=s.invoice[t],c=s.invoice[e];return s.invoice[t]=c,s.invoice[e]=i,{invoice:s.invoice}}))}},{key:"pushUp",value:function(t){if(0==t)return!1;var e=t-1;this.swapInArray(e,t)}},{key:"pullDown",value:function(t){if(t+1==this.state.invoice.length)return!1;var e=t+1;this.swapInArray(t,e)}},{key:"finalize",value:function(){var t=this.date.current.value,e=this.tax.current.value,s=this.sym.current.value;return""==e?this.setState({status:"error",statusDesc:"Empty or non-numeric tax"}):""==s?this.setState({status:"error",statusDesc:"Empty billing currency"}):0==this.state.invoice.length?this.setState({status:"failure",statusDesc:"Empty Cart"}):(this.setState({status:void 0,statusDesc:void 0}),void(this.props.saveInvoice({date:""==t?(new Date).toISOString().slice(0,10):t,tax:e,currency:s,subtotal:this.state.subtotal,sold:this.state.invoice})?this.setState({status:"success",statusDesc:"Invoice Added!"}):this.setState({status:"error",statusDesc:"Failed!"})))}},{key:"componentDidMount",value:function(){if(0==this.state.invoice.length&&this.props.client.deals.length>0){var t=this.props.client.deals[0];return this.setState({invoice:t.sold,subtotal:t.subtotal})}}},{key:"render",value:function(){var t=this,e={width:"50%"},s={width:"25%"},i={display:"flex"},c={width:"75%"};return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{style:e,onClick:this.finalize.bind(this),children:"Enter"}),Object(h.jsxs)("section",{style:"error"==this.state.status?{display:"flex",justifyContent:"space-between",backgroundColor:"red",color:"white",fontWeight:"bold",paddingInline:"1rem"}:"success"==this.state.status?{display:"flex",justifyContent:"space-between",backgroundColor:"green",color:"white",fontWeight:"bold",paddingInline:"1rem"}:"failure"==this.state.status?{display:"flex",justifyContent:"space-between",backgroundColor:"yellow",color:"black",fontWeight:"bold",paddingInline:"1rem"}:{display:"none"},children:[this.state.statusDesc,Object(h.jsx)("button",{onClick:function(){t.setState({status:void 0,statusDesc:void 0})},children:"X"})]}),Object(h.jsx)("label",{style:c,children:"Invoice Date:"}),Object(h.jsx)("input",{type:"date",placeholder:"Invoice date",style:s,ref:this.date,defaultValue:(new Date).toISOString().slice(0,10)}),Object(h.jsx)("input",{type:"text",placeholder:"Currency",ref:this.sym,style:s}),Object(h.jsx)("input",{type:"number",placeholder:"Tax",ref:this.tax,style:s}),Object(h.jsxs)("label",{style:c,children:["Sub Total: ",this.state.subtotal]}),Object(h.jsxs)("p",{children:["Invoice no: ",Array.isArray(this.props.client.deals)&&this.props.client.deals.length]}),Object(h.jsxs)("p",{children:["Company: ",this.props.client.brand]}),Object(h.jsxs)("p",{children:["Owner/agent: ",this.props.client.agent]}),Object(h.jsx)("input",{type:"text",placeholder:"Description",ref:this.desc,style:e}),Object(h.jsx)("input",{type:"number",placeholder:"Price",ref:this.cost,style:s}),Object(h.jsx)("button",{onClick:this.addToInvoice.bind(this),style:s,children:"Add"}),this.state.invoice.map((function(e,s){return Object(h.jsx)(n.Fragment,{children:Object(h.jsxs)("section",{style:i,children:[Object(h.jsx)("button",{onClick:t.removeService.bind(t,s),children:"\u274c"}),Object(h.jsx)("button",{onClick:t.pushUp.bind(t,s),children:"\u25b3"}),Object(h.jsx)("button",{onClick:t.pullDown.bind(t,s),children:"\u25bd"}),Object(h.jsx)("span",{style:{marginInlineEnd:"auto",paddingInlineStart:"1em"},children:e.desc}),e.cost]})},"cart-product-"+s)}))]})}}]),s}(n.Component),p=function(t){Object(o.a)(s,t);var e=Object(l.a)(s);function s(){return Object(r.a)(this,s),e.apply(this,arguments)}return Object(a.a)(s,[{key:"render",value:function(){var t=this;return Object(h.jsxs)(h.Fragment,{children:[this.props.services.map((function(e,s){return Object(h.jsx)(n.Fragment,{children:Object(h.jsxs)("section",{style:{justifyContent:"space-between",display:"flex"},children:[Object(h.jsx)("label",{children:e.desc}),Object(h.jsx)("label",{children:e.cost})]})},t.props.prefix+"-"+s)})),Object(h.jsx)("hr",{})]})}}]),s}(n.Component),x=s(6),y=x.StyleSheet.create({page:{paddingHorizontal:65,paddingVertical:35},heading:{backgroundColor:"beige",fontVariantCaps:"small-caps",fontFamily:"Times-Roman",textAlign:"right"},title:{fontSize:24},subtitle:{fontSize:12},bold:{fontFamily:"Times-Roman",fontSize:18,paddingVertical:15},light:{fontFamily:"Times-Roman",fontSize:16,color:"grey",width:"25%"},text:{fontFamily:"Times-Roman",fontSize:16},thead:{flexDirection:"row",borderTop:1,borderBottom:1,marginTop:35},tbody:{flexDirection:"row",borderBottom:1,borderColor:"grey"},desc:{fontFamily:"Times-Roman",fontSize:16,width:"75%"},cost:{fontFamily:"Times-Roman",fontSize:16,textAlign:"right",width:"25%"},total:{fontFamily:"Times-Roman",fontSize:16,flexDirection:"row",justifyContent:"space-between",borderBottom:1,width:"35%"}});function f(t){return Object(h.jsx)(x.Document,{children:Object(h.jsxs)(x.Page,{size:"A4",style:y.page,children:[Object(h.jsxs)(x.View,{style:y.heading,children:[Object(h.jsx)(x.Text,{style:y.title,children:"Invoice\xa0"}),Object(h.jsxs)(x.Text,{style:y.subtitle,children:["Invoice Date: ",t.date,"\xa0"]}),Object(h.jsxs)(x.Text,{style:y.subtitle,children:["Invoice Currency: ",t.currency,"\xa0"]})]}),Object(h.jsx)(x.Text,{style:y.bold,children:"Bill To:"}),Object(h.jsxs)(x.View,{style:{flexDirection:"row"},children:[Object(h.jsx)(x.Text,{style:y.light,children:"Company:"}),Object(h.jsx)(x.Text,{style:[y.text,{fontWeight:"bold"}],children:t.company})]}),Object(h.jsxs)(x.View,{style:{flexDirection:"row"},children:[Object(h.jsx)(x.Text,{style:y.light,children:"Contact Name:"}),Object(h.jsx)(x.Text,{style:y.text,children:t.agent})]}),Object(h.jsxs)(x.View,{style:{flexDirection:"row"},children:[Object(h.jsx)(x.Text,{style:y.light,children:"Address:"}),Object(h.jsx)(x.Text,{style:y.text,children:t.address})]}),Object(h.jsxs)(x.View,{style:{flexDirection:"row"},children:[Object(h.jsx)(x.Text,{style:y.light,children:"Phone:"}),Object(h.jsx)(x.Text,{style:y.text,children:t.phone})]}),Object(h.jsxs)(x.View,{style:y.thead,children:[Object(h.jsx)(x.Text,{style:y.desc,children:"Service Name"}),Object(h.jsx)(x.Text,{style:y.cost,children:"Price"})]}),t.invoice.map((function(t,e){return Object(h.jsxs)(x.View,{style:y.tbody,children:[Object(h.jsx)(x.Text,{style:y.desc,children:t.desc}),Object(h.jsx)(x.Text,{style:y.cost,children:t.cost})]},"invoice-pdf"+e)})),Object(h.jsx)(x.View,{style:{flexDirection:"row-reverse"},children:Object(h.jsxs)(x.View,{style:[y.total,{borderColor:"grey",marginTop:10}],children:[Object(h.jsx)(x.Text,{children:"Sub Total:"}),Object(h.jsx)(x.Text,{children:t.subtotal})]})}),Object(h.jsx)(x.View,{style:{flexDirection:"row-reverse"},children:Object(h.jsxs)(x.View,{style:[y.total,{borderColor:"grey"}],children:[Object(h.jsx)(x.Text,{children:"Tax Total:"}),Object(h.jsx)(x.Text,{children:t.tax})]})}),Object(h.jsx)(x.View,{style:{flexDirection:"row-reverse"},children:Object(h.jsxs)(x.View,{style:y.total,children:[Object(h.jsx)(x.Text,{children:"Grand Total:"}),Object(h.jsx)(x.Text,{children:Number(t.tax)+Number(t.subtotal)})]})})]})})}var O=function(t){Object(o.a)(s,t);var e=Object(l.a)(s);function s(){return Object(r.a)(this,s),e.apply(this,arguments)}return Object(a.a)(s,[{key:"render",value:function(){var t=this;return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(x.BlobProvider,{document:Object(h.jsx)(f,{company:this.props.brand,agent:this.props.agent,address:this.props.local,phone:this.props.phone,date:this.props.date,subtotal:this.props.subtotal,tax:this.props.tax,invoice:this.props.services,currency:this.props.currency}),children:function(e){e.blob;var s=e.url,n=e.loading;e.error;return n?"loading":Object(h.jsx)("button",{onClick:function(){return window.open(s)},style:t.props.style,children:"\u270e"})}})})}}]),s}(n.Component),v=function(t){Object(o.a)(s,t);var e=Object(l.a)(s);function s(t){var n;return Object(r.a)(this,s),(n=e.call(this,t)).state={content:void 0,current:void 0},n}return Object(a.a)(s,[{key:"saveProfile",value:function(t){function e(t){return String(t).replace(/[^A-Za-z0-9]/g,"").toUpperCase()}var s=""!=e(t.brand)&&(0==this.props.clients.length||void 0==this.props.clients.find((function(s){return e(s.brand)==e(t.brand)})));return s&&(this.props.updateClientList(this.props.clients.concat([Object(u.a)(Object(u.a)({},t),{},{deals:[]})])),this.setState((function(t,e){return{current:t.current+1}}))),s}},{key:"updateDeals",value:function(t){var e=this.props.clients;return e[this.state.current].deals.unshift(t),this.props.updateClientList(e),!0}},{key:"removeDeal",value:function(t){var e=this.props.clients,s=e[this.state.current].deals;e[this.state.current].deals=s.slice(0,t).concat(s.slice(t+1)),this.props.updateClientList(e)}},{key:"removeClient",value:function(t){var e=this.props.clients,s=e.slice(0,t).concat(e.slice(t+1));this.props.updateClientList(s)}},{key:"render",value:function(){var t=this,e={width:"100%"};return Object(h.jsxs)(h.Fragment,{children:[(this.state.content||this.state.current>-1)&&Object(h.jsx)("button",{style:{width:"50%"},onClick:function(){return t.setState({current:void 0,content:void 0})},children:"Back"}),!this.state.content&&!(this.state.current>-1)&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("input",{style:e,type:"text",placeholder:"Search"}),Object(h.jsx)("button",{style:e,onClick:function(){return t.setState({current:t.props.clients.length,content:"profile"})},children:"New Client"})]}),!this.state.content&&0==this.props.clients.length&&"No client found",!this.state.content&&!this.state.current&&this.props.clients.map((function(e,s){return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsx)("button",{style:{width:"calc(100% - 5em)"},onClick:function(){return t.setState({current:s,content:"invoice"})},children:e.brand}),Object(h.jsx)("button",{style:{width:"2.5em"},onClick:function(){return t.setState({current:s,content:"report"})},children:"\u039e"}),Object(h.jsx)("button",{style:{width:"2.5em"},onClick:t.removeClient.bind(t,s),children:"\u274c"})]},"list-clients"+s)})),"profile"==this.state.content&&Object(h.jsx)(d,{saveClientProfile:this.saveProfile.bind(this)}),"invoice"==this.state.content&&Object(h.jsx)(j,{client:this.props.clients[this.state.current],saveInvoice:this.updateDeals.bind(this)}),"report"==this.state.content&&0==this.props.clients[this.state.current].deals.length&&Object(h.jsx)("p",{children:"No transaction report found"}),"report"==this.state.content&&this.props.clients[this.state.current].deals.length>0&&this.props.clients[this.state.current].deals.map((function(e,s){return Object(h.jsxs)(n.Fragment,{children:[Object(h.jsxs)("label",{style:{width:"calc(100% - 5em)"},children:["Date: ",e.date]}),Object(h.jsx)(O,{style:{width:"2.5em"},date:e.date,tax:e.tax,currency:e.currency,services:e.sold,subtotal:e.subtotal,brand:t.props.clients[t.state.current].brand,agent:t.props.clients[t.state.current].agent,local:t.props.clients[t.state.current].local,email:t.props.clients[t.state.current].email,phone:t.props.clients[t.state.current].phone,cyber:t.props.clients[t.state.current].cyber}),Object(h.jsx)("button",{style:{width:"2.5em"},onClick:t.removeDeal.bind(t,s),children:"\u274c"}),Object(h.jsx)(p,{prefix:"invoice-"+e.brand+s,services:e.sold})]},"invoice-"+e.brand+s)}))]})}}]),s}(n.Component),m=(s(541),new FileReader),g=function(t){Object(o.a)(s,t);var e=Object(l.a)(s);function s(t){var i;return Object(r.a)(this,s),(i=e.call(this,t)).state={content:"main",clients:Object.entries(JSON.parse(JSON.stringify(localStorage))).map((function(t){return JSON.parse(t[1])}))||[]},i.file=Object(n.createRef)(),i}return Object(a.a)(s,[{key:"updateClientList",value:function(t){this.setState({clients:t})}},{key:"restore",value:function(){m.readAsText(this.file.current.files[0]);var t=this;m.onload=function(e){var s=JSON.parse(e.target.result);Array.isArray(s)&&t.setState({clients:s}),console.debug(Array.isArray(s)),console.debug(t.state.clients)}}},{key:"componentDidUpdate",value:function(){if(this.state.clients.length<localStorage.length)for(var t=localStorage.length-this.state.clients.length,e=0;e<t;e++)localStorage.removeItem(this.state.clients.length+e);this.state.clients.map((function(t,e){var s=JSON.stringify(t);return s!==localStorage.getItem(e)?localStorage.setItem(e,s):null}))}},{key:"render",value:function(){var t=this;return Object(h.jsxs)("div",{className:"flexbox",children:[Object(h.jsxs)("div",{className:"sidebar",children:[Object(h.jsx)("button",{onClick:function(){return t.setState({content:"restore"})},children:"Restore"}),Object(h.jsx)("button",{onClick:function(){return t.setState({content:"backup"})},children:"Backup"})]}),Object(h.jsxs)("div",{className:"content",children:["main"==this.state.content&&Object(h.jsx)(v,{clients:this.state.clients,updateClientList:this.updateClientList.bind(this)}),"main"!=this.state.content&&Object(h.jsx)("button",{onClick:function(){return t.setState({content:"main"})},style:{width:"50%"},children:"Back"}),"backup"==this.state.content&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("br",{}),Object(h.jsx)("a",{href:URL.createObjectURL(new Blob([JSON.stringify(this.state.clients)],{type:"application/json"})),download:"Project_Manager_".concat((new Date).toUTCString(),"_Backup.json"),children:"Download"})]}),"restore"==this.state.content&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("br",{}),Object(h.jsx)("input",{type:"file",accept:"application/json",ref:this.file}),Object(h.jsx)("button",{onClick:this.restore.bind(this),children:"Submit"})]})]})]})}}]),s}(n.Component);c.a.render(Object(n.createElement)(g,null),document.getElementById("root"))}},[[542,1,2]]]);
//# sourceMappingURL=main.23d02dcf.chunk.js.map